@page "/"
@using WebApp.Services
@inject MovieService MovieService
<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.
@if (_movies == null)
{
<p><em>Loading...</em></p>
}
else
{
<table class="table">
    <thead>
    <tr>
        <th>Id</th>
        <th>Title</th>
        <th>Slug</th>
        <th>Rating</th>
        <th>User Rating</th>
        <th>Year Of Release</th>
        <th>Genres</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var movie in _movies.Items)
    {
    <tr>
        <td>@movie.Id</td>
        <td>@movie.Title</td>
        <td>@movie.Slug</td>
        <td>@movie.Rating</td>
        <td>@movie.UserRating</td>
        <td>@movie.YearOfRelease</td>
        <td>@string.Join(", ", movie.Genres)</td>
    </tr>
    }
    </tbody>
</table>
}


@code {
    private MoviesResponse? _movies;

    protected override async Task OnInitializedAsync()
    {
        _movies = await MovieService.GetMovies();
    }
}
